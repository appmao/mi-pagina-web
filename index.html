<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snake Game Monetizado</title>
  <!-- Google AdSense Script -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX" crossorigin="anonymous"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    canvas { border: 2px solid black; display: block; margin: 10px auto; }
    .hidden { display: none; }
    .anchor-ad {
      position: fixed;
      bottom: 0;
      width: 100%;
      z-index: 9999;
      background: white;
    }
  </style>
</head>
<body>
  <h1>Snake Game</h1>

  <!-- Anuncio superior -->
  <ins class="adsbygoogle"
       style="display:block; text-align:center; margin-bottom: 10px;"
       data-ad-client="ca-pub-XXXXXXXXXX"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <p id="userInfo"></p>
  <button id="loginBtn">Iniciar sesión con Google</button>
  <button id="logoutBtn" class="hidden">Cerrar sesión</button>

  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <p>Puntaje: <span id="score">0</span> | Saldo: $<span id="saldo">0.00</span></p>
  <button id="startBtn" class="hidden">Iniciar Juego</button>

  <!-- Anuncio entre juego y retiro -->
  <ins class="adsbygoogle"
       style="display:block; text-align:center; margin: 20px 0;"
       data-ad-client="ca-pub-XXXXXXXXXX"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <h2 class="hidden" id="withdrawTitle">Retirar saldo</h2>
  <div id="withdrawSection" class="hidden">
    <select id="withdrawMethod">
      <option value="paypal">PayPal</option>
      <option value="binance">Binance Pay</option>
    </select>
    <input id="withdrawInfo" placeholder="Tu correo o ID" type="text" />
    <input id="withdrawAmount" type="number" placeholder="Cantidad a retirar ($5 mínimo)">
    <button id="withdrawBtn">Retirar</button>
  </div>

  <!-- Anuncio inferior -->
  <ins class="adsbygoogle"
       style="display:block; text-align:center; margin-top: 20px;"
       data-ad-client="ca-pub-XXXXXXXXXX"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <h2 class="hidden" id="historyTitle">Historial de Retiros</h2>
  <ul id="historyList" class="hidden"></ul>

  <!-- Anuncio anclado flotante -->
  <div class="anchor-ad">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXXXXX"
         data-ad-slot="1234567890"
         data-ad-format="auto"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <!-- Simulación de anuncio intersticial -->
  <div id="interstitialAd" class="hidden" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); color: white; display: flex; justify-content: center; align-items: center; flex-direction: column; z-index: 10000;">
    <p style="font-size: 24px;">Publicidad</p>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXXXXX"
         data-ad-slot="1234567890"
         data-ad-format="auto"></ins>
    <button onclick="document.getElementById('interstitialAd').classList.add('hidden')" style="margin-top: 20px; padding: 10px 20px;">Cerrar</button>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDdiajpaA3WcSars0MXymJT2_-YBfhVVSQ",
      authDomain: "snakegame-app-ab09a.firebaseapp.com",
      databaseURL: "https://snakegame-app-ab09a-default-rtdb.firebaseio.com",
      projectId: "snakegame-app-ab09a",
      storageBucket: "snakegame-app-ab09a.appspot.com",
      messagingSenderId: "763755954159",
      appId: "1:763755954159:web:0a1c8634c95091eb59401a"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const loginBtn = document.getElementById("loginBtn");
    const interstitial = document.getElementById("interstitialAd");

    let interstitialShown = false;

    loginBtn.onclick = async () => {
      const provider = new GoogleAuthProvider();
      await signInWithPopup(auth, provider);
      if (!interstitialShown) {
        interstitial.classList.remove("hidden");
        interstitialShown = true;
      }
    };
  </script>

</body>
</html>
